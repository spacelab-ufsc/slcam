ifndef BUILD_DIR
	BUILD_DIR=$(CURDIR)
endif

ifndef OPENCM3_FAMILY
	OPENCM3_FAMILY=STM32F1
endif

.PHONY: all
all:
#	$(MAKE) BUILD_DIR=$(BUILD_DIR) -C ov2640
#	$(MAKE) BUILD_DIR=$(BUILD_DIR) -C w25qxxx
	$(MAKE) BUILD_DIR=$(BUILD_DIR) OPENCM3_FAMILY=$(OPENCM3_FAMILY) -C can
	$(MAKE) BUILD_DIR=$(BUILD_DIR) OPENCM3_FAMILY=$(OPENCM3_FAMILY) -C uart
	$(MAKE) BUILD_DIR=$(BUILD_DIR) OPENCM3_FAMILY=$(OPENCM3_FAMILY) -C spi

.PHONY: clean
clean:
	rm $(BUILD_DIR)/*.o
